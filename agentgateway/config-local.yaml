# Local development configuration for agentgateway
# Run PolicyGuard as a subprocess via stdio

binds:
  - port: 3000
    listeners:
      - routes:
          - policies:
              cors:
                allowOrigins:
                  - "*"
                allowHeaders:
                  - mcp-protocol-version
                  - content-type
                  - cache-control
                exposeHeaders:
                  - "Mcp-Session-Id"
            backends:
              - mcp:
                  targets:
                    - name: policyguard
                      stdio:
                        cmd: python
                        args: ["-m", "src.main"]
